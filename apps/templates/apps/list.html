{% extends "base.html" %}

{% block sidebar %}
{% include "sidebar.html" with active="apps" %}
{% endblock %}

{% block header %}
<div class="btn-group pull-right">
	<a class="btn" title="new app" href="{% url 'create-app' %}">new app</a>
</div>
<h1>Apps</h1>
{% endblock %}

{% block content %}
<div class="container-fluid">
	<div class="row-fluid">
		<div class="span12">
            <div class="search">
                <form method="get">
                    <input type="text" name="name" placeholder="search apps by name">
                </form>
            </div>
			<table class="table">
			{% for app in apps %}
				<tr>
					<td>
						<a href="{% url 'detail-app' app.name %}" title="App Details">
                            {{ app.name }} 
                            {% if  app.lock.Locked %}<i class="icon-lock"></i>{% endif %}
						</a>
					</td>
				</tr>
			{% endfor %}
			</table>
		</div>
	</div>
</div>
{% endblock %}

{% block extra_js %}
<script type="text/javascript">
var appName = "{{ app.name }}";
var envs = {};
{% for env in app.envs %}
	envs["{{ env.name }}"] = "{{ env.value }}";
{% endfor %}
$.detail(appName, envs);
$(".settings-toggle").on("click", function() {
    $("table", this).toggleClass("hide");
});
</script>
{% endblock %}
