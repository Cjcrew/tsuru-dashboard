{% extends "base.html" %}

{% block extra_css %}
<link rel="stylesheet" href="{{ STATIC_URL }}css/jquery-ui.css" />
<style>
	#h-slider {
		width: 300px;
		margin: 46px 0 0 131px;
	}
	#content .units-box {
		height: 95px;
	}
	#content .stat-boxes {
		float: left;
	}
	#content .stat-boxes .right {
		padding: 9px 2px 7px 0;
	}
</style>
{% endblock %}

{% block content %}
<div id="content-header">
	<h1>{{ app.name }}</h1>
	{% include "apps/navbar.html" %}
</div>
<div id="breadcrumb">
	<a href="#" title="Go to Home" class="tip-bottom"><i class="icon-home"></i> Home</a>
	<a href="{% url 'list-app' %}" class="tip-bottom"> Apps</a>
</div>
<div class="container-fluid">
	<div class="row-fluid">
		<div class="span12">
			<div class="widget-box">
				<div class="widget-title">
					<span class="icon">
						<i class="icon-signal"></i>
					</span>
					<h5>Units</h5>
				</div>
				<div class="widget-content units-box">
					<ul class="stat-boxes">
						<li class="popover-tickets" data-original-title="" title="">
						<div class="right">
							<strong id="units">{{ app.units|length }}</strong>
							Instances
						</div>
						</li>
					</ul>
					<div id="h-slider"></div>
				</div>
			</div>
		</div>
	</div>
	<div class="row-fluid">
		<div class="span12">
			<div class="widget-box">
				<div class="widget-title">
					<span class="icon">
						<i class="icon-signal"></i>
					</span>
					<h5>Info</h5>
				</div>
				<div class="widget-content">
					<p><strong>App url:</strong> <a href="http://{{ app.ip }}" target="_blank">http://{{ app.ip }}</a></p>
					<p><strong>Git clone url:</strong> {{ app.repository }}</p>
					<p><strong>Domain:</strong> {{ app.cname }}</p>
					<p><strong>Teams:</strong> {{ app.teams|join:", " }}</p>
					<p><strong>Framework:</strong> {{ app.framework }}</p>
				</div>
			</div>
		</div>
	</div>
	<div class="row-fluid">
		<div class="span12">
			<div class="widget-box">
				<div class="widget-title">
					<span class="icon">
						<i class="icon-signal"></i>
					</span>
					<h5>Dangerous!</h5>
				</div>
				<div class="widget-content">
					<a class="btn btn-danger" href="{% url 'remove_app' app.name %}"><i class="icon-remove icon-white"></i> Delete app</a>
				</div>
			</div>
		</div>
	</div>
</div>
{% endblock content %}

{% block extra_js %}
<script src="{{ STATIC_URL}}js/jquery.min.js"></script>
<script src="{{ STATIC_URL }}js/jquery-ui.custom.js"></script>
<script>
	// Horizontal Slider
	$('#h-slider').slider({
		orientation: "horizontal",
		value: {{ app.units|length }},
		range: "min",
		min: 1,
		max: 10,
		slide:  function( event, ui ) {
			$( "#units" ).html( ui.value );
		}
	});
</script>
{% endblock %}
